apiVersion: 1

datasources:
  - name: Loki
    type: loki
    access: proxy
    uid: loki
    url: http://loki:3100
    editable: false

  - name: Prometheus
    type: prometheus
    access: proxy
    uid: prometheus
    url: http://prometheus:9090
    editable: false

  - name: InfluxDB
    type: influxdb
    access: proxy
    uid: influxdb
    url: http://influxdb:8086
    jsonData:
      version: Flux
      organization: home
      defaultBucket: influx
    secureJsonData:
      token: {{ influxdb_admin_token }}
    editable: false

  - name: Jaeger
    type: jaeger
    access: proxy
    uid: jaeger
    url: http://jaeger:16686
    editable: false
    jsonData:
      tracesToLogsV2:
        datasourceUid: loki
        spanStartTimeShift: 1h
        spanEndTimeShift: -1h
        tags: []
        filterByTraceID: false
        filterBySpanID: false
        customQuery: true
        query: '{container_name=~".*$${__span.tags["traefik.service.name"]}.*"}'
